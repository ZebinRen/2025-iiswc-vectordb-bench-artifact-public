2025-06-08 22:32:09,671 | [92mINFO[0m: [92mTask:
TaskConfig(db=<DB.Milvus: 'Milvus'>, db_config=MilvusConfig(db_label='milvus_ivf_cohere_10m', version='', note='', uri=SecretStr('**********'), user=None, password=SecretStr(''), num_shards=1), db_case_config=IVFFlatConfig(index=<IndexType.IVFFlat: 'IVF_FLAT'>, metric_type=None, nlist=12648, nprobe=17), case_config=CaseConfig(case_id=<CaseType.Performance768D10M: 4>, custom_case={}, k=10, concurrency_search_config=ConcurrencySearchConfig(num_concurrency=[32], concurrency_duration=30, concurrency_timeout=3600)), stages=['search_serial', 'search_concurrent'])
[0m (cli.py:516) (1394620)
2025-06-08 22:32:09,672 | [92mINFO[0m: [92mgenerated uuid for the tasks: d9ad2422f0fa4fc5bd3ab52088dbab8f[0m (interface.py:72) (1394620)
2025-06-08 22:32:09,799 | INFO | DB             | CaseType     Dataset               Filter | task_label (task_runner.py:340)
2025-06-08 22:32:09,799 | INFO | -----------    | ------------ -------------------- ------- | -------    (task_runner.py:340)
2025-06-08 22:32:09,799 | INFO | Milvus-milvus_ivf_cohere_10m | Performance  Cohere-LARGE-10M        None | d9ad2422f0fa4fc5bd3ab52088dbab8f (task_runner.py:340)
2025-06-08 22:32:09,799 | [92mINFO[0m: [92mtask submitted: id=d9ad2422f0fa4fc5bd3ab52088dbab8f, d9ad2422f0fa4fc5bd3ab52088dbab8f, case number: 1[0m (interface.py:242) (1394620)
2025-06-08 22:32:10,479 | [92mINFO[0m: [92m[1/1] start case: {'label': <CaseLabel.Performance: 2>, 'dataset': {'data': {'name': 'Cohere', 'size': 10000000, 'dim': 768, 'metric_type': <MetricType.COSINE: 'COSINE'>}}, 'db': 'Milvus-milvus_ivf_cohere_10m'}, drop_old=False[0m (interface.py:172) (1394656)
2025-06-08 22:32:10,479 | [92mINFO[0m: [92mStarting run[0m (task_runner.py:105) (1394656)
2025-06-08 22:32:13,517 | [92mINFO[0m: [92mRead the entire file into memory: test.parquet[0m (dataset.py:251) (1394656)
2025-06-08 22:32:13,603 | [92mINFO[0m: [92mRead the entire file into memory: neighbors.parquet[0m (dataset.py:251) (1394656)
2025-06-08 22:32:14,012 | [92mINFO[0m: [92mStart performance case[0m (task_runner.py:147) (1394656)
2025-06-08 22:32:14,774 | [92mINFO[0m: [92mStart search 30s in concurrency 32, filters: None[0m (mp_runner.py:118) (1394656)
2025-06-08 22:32:25,179 | [92mINFO[0m: [92mSyncing all process and start concurrency search, concurrency=32[0m (mp_runner.py:125) (1394656)
2025-06-08 22:32:55,234 | [92mINFO[0m: [92mSpawnProcess-1:22 search 30s: actual_dur=30.009s, count=185, qps in this process: 6.1648[0m (mp_runner.py:91) (1394844)
2025-06-08 22:32:55,244 | [92mINFO[0m: [92mSpawnProcess-1:20 search 30s: actual_dur=30.0207s, count=183, qps in this process: 6.0958[0m (mp_runner.py:91) (1394842)
2025-06-08 22:32:55,250 | [92mINFO[0m: [92mSpawnProcess-1:11 search 30s: actual_dur=30.0305s, count=182, qps in this process: 6.0605[0m (mp_runner.py:91) (1394833)
2025-06-08 22:32:55,255 | [92mINFO[0m: [92mSpawnProcess-1:13 search 30s: actual_dur=30.0278s, count=188, qps in this process: 6.2609[0m (mp_runner.py:91) (1394835)
2025-06-08 22:32:55,255 | [92mINFO[0m: [92mSpawnProcess-1:25 search 30s: actual_dur=30.0199s, count=189, qps in this process: 6.2958[0m (mp_runner.py:91) (1394847)
2025-06-08 22:32:55,257 | [92mINFO[0m: [92mSpawnProcess-1:9 search 30s: actual_dur=30.0335s, count=183, qps in this process: 6.0932[0m (mp_runner.py:91) (1394831)
2025-06-08 22:32:55,258 | [92mINFO[0m: [92mSpawnProcess-1:27 search 30s: actual_dur=30.0472s, count=184, qps in this process: 6.1237[0m (mp_runner.py:91) (1394887)
2025-06-08 22:32:55,259 | [92mINFO[0m: [92mSpawnProcess-1:26 search 30s: actual_dur=30.0548s, count=184, qps in this process: 6.1222[0m (mp_runner.py:91) (1394886)
2025-06-08 22:32:55,291 | [92mINFO[0m: [92mSpawnProcess-1:33 search 30s: actual_dur=30.0154s, count=181, qps in this process: 6.0302[0m (mp_runner.py:91) (1395026)
2025-06-08 22:32:55,292 | [92mINFO[0m: [92mSpawnProcess-1:2 search 30s: actual_dur=30.055s, count=184, qps in this process: 6.1221[0m (mp_runner.py:91) (1394822)
2025-06-08 22:32:55,293 | [92mINFO[0m: [92mSpawnProcess-1:19 search 30s: actual_dur=30.0648s, count=181, qps in this process: 6.0203[0m (mp_runner.py:91) (1394841)
2025-06-08 22:32:55,297 | [92mINFO[0m: [92mSpawnProcess-1:17 search 30s: actual_dur=30.0714s, count=185, qps in this process: 6.152[0m (mp_runner.py:91) (1394839)
2025-06-08 22:32:55,298 | [92mINFO[0m: [92mSpawnProcess-1:4 search 30s: actual_dur=30.0778s, count=184, qps in this process: 6.1175[0m (mp_runner.py:91) (1394826)
2025-06-08 22:32:55,306 | [92mINFO[0m: [92mSpawnProcess-1:8 search 30s: actual_dur=30.1009s, count=183, qps in this process: 6.0796[0m (mp_runner.py:91) (1394830)
2025-06-08 22:32:55,313 | [92mINFO[0m: [92mSpawnProcess-1:21 search 30s: actual_dur=30.1079s, count=190, qps in this process: 6.3106[0m (mp_runner.py:91) (1394843)
2025-06-08 22:32:55,314 | [92mINFO[0m: [92mSpawnProcess-1:31 search 30s: actual_dur=30.0831s, count=183, qps in this process: 6.0831[0m (mp_runner.py:91) (1394929)
2025-06-08 22:32:55,314 | [92mINFO[0m: [92mSpawnProcess-1:10 search 30s: actual_dur=30.077s, count=185, qps in this process: 6.1509[0m (mp_runner.py:91) (1394832)
2025-06-08 22:32:55,314 | [92mINFO[0m: [92mSpawnProcess-1:23 search 30s: actual_dur=30.0747s, count=185, qps in this process: 6.1513[0m (mp_runner.py:91) (1394845)
2025-06-08 22:32:55,314 | [92mINFO[0m: [92mSpawnProcess-1:18 search 30s: actual_dur=30.0952s, count=184, qps in this process: 6.1139[0m (mp_runner.py:91) (1394840)
2025-06-08 22:32:55,315 | [92mINFO[0m: [92mSpawnProcess-1:30 search 30s: actual_dur=30.0966s, count=182, qps in this process: 6.0472[0m (mp_runner.py:91) (1394928)
2025-06-08 22:32:55,315 | [92mINFO[0m: [92mSpawnProcess-1:16 search 30s: actual_dur=30.1017s, count=184, qps in this process: 6.1126[0m (mp_runner.py:91) (1394838)
2025-06-08 22:32:55,316 | [92mINFO[0m: [92mSpawnProcess-1:12 search 30s: actual_dur=30.0751s, count=181, qps in this process: 6.0183[0m (mp_runner.py:91) (1394834)
2025-06-08 22:32:55,316 | [92mINFO[0m: [92mSpawnProcess-1:32 search 30s: actual_dur=30.0996s, count=181, qps in this process: 6.0134[0m (mp_runner.py:91) (1394987)
2025-06-08 22:32:55,318 | [92mINFO[0m: [92mSpawnProcess-1:15 search 30s: actual_dur=30.0952s, count=186, qps in this process: 6.1804[0m (mp_runner.py:91) (1394837)
2025-06-08 22:32:55,318 | [92mINFO[0m: [92mSpawnProcess-1:28 search 30s: actual_dur=30.091s, count=181, qps in this process: 6.0151[0m (mp_runner.py:91) (1394888)
2025-06-08 22:32:55,318 | [92mINFO[0m: [92mSpawnProcess-1:6 search 30s: actual_dur=30.0753s, count=180, qps in this process: 5.985[0m (mp_runner.py:91) (1394828)
2025-06-08 22:32:55,319 | [92mINFO[0m: [92mSpawnProcess-1:14 search 30s: actual_dur=30.0963s, count=182, qps in this process: 6.0473[0m (mp_runner.py:91) (1394836)
2025-06-08 22:32:55,321 | [92mINFO[0m: [92mSpawnProcess-1:5 search 30s: actual_dur=30.0698s, count=183, qps in this process: 6.0858[0m (mp_runner.py:91) (1394827)
2025-06-08 22:32:55,325 | [92mINFO[0m: [92mSpawnProcess-1:29 search 30s: actual_dur=30.0857s, count=183, qps in this process: 6.0826[0m (mp_runner.py:91) (1394889)
2025-06-08 22:32:55,325 | [92mINFO[0m: [92mSpawnProcess-1:3 search 30s: actual_dur=30.098s, count=188, qps in this process: 6.2463[0m (mp_runner.py:91) (1394825)
2025-06-08 22:32:55,325 | [92mINFO[0m: [92mSpawnProcess-1:24 search 30s: actual_dur=30.1002s, count=181, qps in this process: 6.0132[0m (mp_runner.py:91) (1394846)
2025-06-08 22:32:55,329 | [92mINFO[0m: [92mSpawnProcess-1:7 search 30s: actual_dur=30.0409s, count=184, qps in this process: 6.125[0m (mp_runner.py:91) (1394829)
2025-06-08 22:32:55,333 | [92mINFO[0m: [92mEnd search in concurrency 32: dur=30.15165632499702s, total_count=5879, qps=194.981[0m (mp_runner.py:139) (1394656)
2025-06-08 22:32:55,931 | [92mINFO[0m: [92mUpdate largest qps with concurrency 32: current max_qps=194.981[0m (mp_runner.py:143) (1394656)
2025-06-08 22:32:57,052 | [92mINFO[0m: [92mSpawnProcess-1:34 start search the entire test_data to get recall and latency[0m (serial_runner.py:206) (1397441)
2025-06-08 22:33:06,678 | [92mINFO[0m: [92mSpawnProcess-1:34 search entire test_data: cost=8.1072s, queries=1000, avg_recall=0.9012, avg_ndcg=0.9117,avg_latency=0.0081, p99=0.0094[0m (serial_runner.py:251) (1397441)
2025-06-08 22:33:06,837 | [92mINFO[0m: [92mPerformance case got result: Metric(max_load_count=0, load_duration=0.0, qps=194.981, serial_latency_p99=np.float64(0.0094), recall=np.float64(0.9012), ndcg=np.float64(0.9117), conc_num_list=[32], conc_qps_list=[194.981], conc_latency_p99_list=[np.float64(0.26007750232311094)], conc_latency_avg_list=[np.float64(0.1636311834113133)])[0m (task_runner.py:186) (1394656)
2025-06-08 22:33:06,837 | [92mINFO[0m: [92m[1/1] finish case: {'label': <CaseLabel.Performance: 2>, 'dataset': {'data': {'name': 'Cohere', 'size': 10000000, 'dim': 768, 'metric_type': <MetricType.COSINE: 'COSINE'>}}, 'db': 'Milvus-milvus_ivf_cohere_10m'}, result=Metric(max_load_count=0, load_duration=0.0, qps=194.981, serial_latency_p99=np.float64(0.0094), recall=np.float64(0.9012), ndcg=np.float64(0.9117), conc_num_list=[32], conc_qps_list=[194.981], conc_latency_p99_list=[np.float64(0.26007750232311094)], conc_latency_avg_list=[np.float64(0.1636311834113133)]), label=ResultLabel.NORMAL[0m (interface.py:174) (1394656)
2025-06-08 22:33:06,837 | INFO |Task summary: run_id=d9ad2, task_label=d9ad2422f0fa4fc5bd3ab52088dbab8f (models.py:375)
2025-06-08 22:33:06,837 | INFO |DB     | db_label                 case               label                            | load_dur    qps        latency(p99)    recall        max_load_count | label (models.py:375)
2025-06-08 22:33:06,837 | INFO |------ | ------------------------ ------------------ -------------------------------- | ----------- ---------- --------------- ------------- -------------- | ----- (models.py:375)
2025-06-08 22:33:06,838 | INFO |Milvus | milvus_ivf_cohere_10m    Performance768D10M d9ad2422f0fa4fc5bd3ab52088dbab8f | 0.0         194.981    0.0094          0.9012        0              | :)    (models.py:375)
2025-06-08 22:33:06,838 | [92mINFO[0m: [92mwrite results to disk /home/zebin/2025-vectordb-bench-new/VectorDBBench-dev/vectordb_bench/results/Milvus/result_20250608_d9ad2422f0fa4fc5bd3ab52088dbab8f_milvus.json[0m (models.py:243) (1394656)
2025-06-08 22:33:06,839 | [92mINFO[0m: [92mSuccess to finish task: label=d9ad2422f0fa4fc5bd3ab52088dbab8f, run_id=d9ad2422f0fa4fc5bd3ab52088dbab8f[0m (interface.py:213) (1394656)
